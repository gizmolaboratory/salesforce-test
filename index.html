<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salesforce Quiz</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .container { max-width: 900px; width: 100%; }
        .card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
            animation: slideUp 0.6s ease-out;
        }
        h1 {
            font-size: 48px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        h2 { font-size: 24px; color: #333; margin-bottom: 20px; }
        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 14px 28px;
            font-size: 16px;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            width: 100%;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            transition: all 0.3s;
        }
        .btn:hover { transform: translateY(-3px); }
        .stats {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .stat {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
        }
        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e0e0e0;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress { height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); transition: width 0.3s; }
        .question { margin-bottom: 20px; }
        .q-text { font-size: 16px; font-weight: 600; color: #333; margin-bottom: 15px; line-height: 1.5; }
        .options { display: grid; gap: 10px; margin-bottom: 20px; }
        .option {
            padding: 14px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            background: white;
            text-align: left;
            transition: all 0.2s;
            font-size: 14px;
        }
        .option:hover { border-color: #667eea; background: #f8f9ff; }
        .option.sel { border-color: #667eea; background: #e8ecff; font-weight: 600; }
        .option.ok { border-color: #4caf50; background: #e8f5e9; color: #2e7d32; }
        .option.no { border-color: #f44336; background: #ffebee; color: #c62828; }
        .msg {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-weight: 600;
            border-left: 4px solid;
        }
        .ok-msg { background: #e8f5e9; color: #2e7d32; border-color: #4caf50; }
        .no-msg { background: #ffebee; color: #c62828; border-color: #f44336; }
        .score { font-size: 48px; font-weight: 900; color: #667eea; margin: 20px 0; }
        .loading { text-align: center; font-size: 18px; color: #667eea; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div class="container" id="app"></div>
    <script>
        let questions = [];
        let round = 1, idx = 0, answers = {}, showing = false, done = false;
        let current = [];

        // ì™¸ë¶€ JSON íŒŒì¼ ë¡œë“œ (GitHub Pages í˜¸í™˜)
        async function loadQuestions() {
            try {
                const response = await fetch('./questions.json');
                if (!response.ok) throw new Error('File not found');
                questions = await response.json();
                getQuestions();
                render();
            } catch (error) {
                document.getElementById('app').innerHTML = `
                    <div class="card" style="text-align: center;">
                        <h2 style="color: #f44336;">âš ï¸ ì˜¤ë¥˜</h2>
                        <p style="color: #666; margin-top: 20px;">questions.json íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
                        <p style="color: #999; font-size: 14px; margin-top: 10px;">
                            GitHub ì €ì¥ì†Œì— questions.json íŒŒì¼ì´ ê°™ì€ í´ë”ì— ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.
                        </p>
                        <p style="color: #999; font-size: 13px; margin-top: 10px;">
                            ì—ëŸ¬: ${error.message}
                        </p>
                    </div>
                `;
            }
        }

        function getQuestions() {
            const start = (round - 1) * 60;
            const end = start + 60;
            if (start < questions.length) {
                current = questions.slice(start, end);
            } else {
                current = [...questions].sort(() => Math.random() - 0.5).slice(0, 60);
            }
            idx = 0;
            answers = {};
            showing = false;
            done = false;
        }

        function toggle(i) {
            if (showing) return;
            const curr = answers[idx] || [];
            answers[idx] = curr.includes(i) ? curr.filter(x => x !== i) : [...curr, i];
            render();
        }

        function submit() {
            showing = true;
            render();
        }

        function next() {
            if (idx < current.length - 1) {
                idx++;
                showing = false;
            } else {
                done = true;
            }
            render();
        }

        function nextRound() {
            round++;
            getQuestions();
            render();
        }

        function restart() {
            round = 1;
            getQuestions();
            render();
        }

        function render() {
            const q = current[idx];
            const sel = answers[idx] || [];
            const cor = q.ans;
            const correct = sel.sort((a, b) => a - b).every((v, i) => v === cor.sort((a, b) => a - b)[i]) && sel.length === cor.length;
            const count = Object.values(answers).filter((a, i) => {
                const s = (a || []).sort((a, b) => a - b);
                const c = (current[i]?.ans || []).sort((a, b) => a - b);
                return JSON.stringify(s) === JSON.stringify(c);
            }).length;

            if (!done) {
                document.getElementById('app').innerHTML = `
                    <div class="card">
                        <div class="stats">
                            <div class="stat">ğŸ¯ Round ${round}</div>
                            <div class="stat">ğŸ“Š Q${idx + 1}/${current.length}</div>
                            <div class="stat">âœ… ${count}/${Object.keys(answers).length}</div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress" style="width: ${((idx + 1) / current.length) * 100}%"></div>
                        </div>
                        <div class="question">
                            <div class="q-text">${q.q}</div>
                            <div style="font-size: 11px; color: #999;">ë¬¸ì œ NO.${q.id}</div>
                        </div>
                        <div class="options">
                            ${q.opts.map((o, i) => {
                                let cl = 'option';
                                if (showing) {
                                    if (cor.includes(i)) cl += ' ok';
                                    else if (sel.includes(i)) cl += ' no';
                                } else if (sel.includes(i)) cl += ' sel';
                                return `<button class="${cl}" onclick="toggle(${i})">${o}</button>`;
                            }).join('')}
                        </div>
                        ${!showing && sel.length > 0 ? `<button class="btn" onclick="submit()">ë‹µë³€ ì œì¶œ</button>` : ''}
                        ${showing ? `
                            <div class="msg ${correct ? 'ok-msg' : 'no-msg'}">
                                ${correct ? 'âœ“ ì •ë‹µì…ë‹ˆë‹¤!' : `âœ— í‹€ë ¸ìŠµë‹ˆë‹¤ (ì •ë‹µ: ${cor.map(i => q.opts[i]).join(', ')})`}
                            </div>
                            <button class="btn" onclick="next()">${idx < current.length - 1 ? 'ë‹¤ìŒ' : 'ê²°ê³¼'}</button>
                        ` : ''}
                    </div>
                `;
            } else {
                const pct = Math.round((count / 60) * 100);
                document.getElementById('app').innerHTML = `
                    <div class="card" style="text-align: center;">
                        <h2 style="margin-bottom: 30px;">ğŸ‰ ë¼ìš´ë“œ ${round} ì™„ë£Œ!</h2>
                        <div class="score">${pct}%</div>
                        <div style="font-size: 16px; color: #666; margin-bottom: 30px;">${count} / 60 ì •ë‹µ</div>
                        <button class="btn" onclick="nextRound()" style="margin-bottom: 10px;">ë‹¤ìŒ ë¼ìš´ë“œ</button>
                        <button class="btn" onclick="restart()">ì²˜ìŒë¶€í„°</button>
                    </div>
                `;
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ questions.json íŒŒì¼ ë¡œë“œ
        loadQuestions();
    </script>
</body>
</html>
